<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="XianYuLauncher.Views.WorldManagementPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- 顶部导航栏 -->
        <Grid Grid.Row="0" Padding="24,16" Background="{ThemeResource LayerFillColorDefaultBrush}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Button Command="{x:Bind ViewModel.GoBackCommand}" 
                    Style="{StaticResource SubtleButtonStyle}"
                    Margin="0,0,16,0">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <FontIcon Glyph="&#xE72B;" FontSize="16"/>
                    <TextBlock Text="返回" VerticalAlignment="Center"/>
                </StackPanel>
            </Button>

            <TextBlock Grid.Column="1" 
                       Text="{x:Bind ViewModel.WorldName, Mode=OneWay}" 
                       Style="{StaticResource TitleTextBlockStyle}"
                       VerticalAlignment="Center"/>
        </Grid>

        <!-- 主内容区 -->
        <ScrollViewer Grid.Row="1">
            <StackPanel Padding="24" Spacing="24" MaxWidth="1200">
                
                <!-- Hero Section - 世界概览卡片 -->
                <Grid Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                      BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                      BorderThickness="1"
                      CornerRadius="8"
                      Padding="32">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- 世界图标 -->
                    <Border Width="128" Height="128" 
                            CornerRadius="8"
                            Background="{ThemeResource LayerFillColorDefaultBrush}"
                            Margin="0,0,32,0">
                        <Image Source="{x:Bind ViewModel.WorldIcon, Mode=OneWay}" 
                               Stretch="UniformToFill"/>
                    </Border>

                    <!-- 世界信息 -->
                    <StackPanel Grid.Column="1" Spacing="12" VerticalAlignment="Center">
                        <TextBlock Text="{x:Bind ViewModel.WorldName, Mode=OneWay}" 
                                   Style="{StaticResource SubtitleTextBlockStyle}"
                                   FontWeight="SemiBold"/>
                        
                        <StackPanel Orientation="Horizontal" Spacing="24">
                            <StackPanel Spacing="4">
                                <TextBlock Text="游戏模式" 
                                           FontSize="12" 
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock Text="{x:Bind ViewModel.GameMode, Mode=OneWay}" 
                                           FontSize="16" 
                                           FontWeight="SemiBold"/>
                            </StackPanel>

                            <StackPanel Spacing="4">
                                <TextBlock Text="难度" 
                                           FontSize="12" 
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock Text="{x:Bind ViewModel.Difficulty, Mode=OneWay}" 
                                           FontSize="16" 
                                           FontWeight="SemiBold"/>
                            </StackPanel>

                            <StackPanel Spacing="4">
                                <TextBlock Text="世界大小" 
                                           FontSize="12" 
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock Text="{x:Bind ViewModel.WorldSize, Mode=OneWay}" 
                                           FontSize="16" 
                                           FontWeight="SemiBold"/>
                            </StackPanel>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,8,0,0">
                            <Button Command="{x:Bind ViewModel.OpenWorldFolderCommand}" 
                                    Style="{StaticResource AccentButtonStyle}">
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <FontIcon Glyph="&#xE8B7;" FontSize="16"/>
                                    <TextBlock Text="打开文件夹"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </StackPanel>
                </Grid>

                <!-- Tab 导航 -->
                <NavigationView PaneDisplayMode="Top" 
                                IsBackButtonVisible="Collapsed"
                                IsSettingsVisible="False"
                                SelectionChanged="NavigationView_SelectionChanged">
                    <NavigationView.MenuItems>
                        <NavigationViewItem Content="概览" Tag="overview">
                            <NavigationViewItem.Icon>
                                <FontIcon Glyph="&#xE80F;"/>
                            </NavigationViewItem.Icon>
                        </NavigationViewItem>
                        <NavigationViewItem Content="数据包" Tag="datapacks">
                            <NavigationViewItem.Icon>
                                <FontIcon Glyph="&#xE8B7;"/>
                            </NavigationViewItem.Icon>
                        </NavigationViewItem>
                        <NavigationViewItem Content="设置" Tag="settings">
                            <NavigationViewItem.Icon>
                                <FontIcon Glyph="&#xE713;"/>
                            </NavigationViewItem.Icon>
                        </NavigationViewItem>
                    </NavigationView.MenuItems>

                    <Frame x:Name="ContentFrame"/>
                </NavigationView>

                <!-- 世界详细信息卡片 -->
                <Grid ColumnSpacing="16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- 基本信息卡片 -->
                    <StackPanel Grid.Column="0" 
                                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                BorderThickness="1"
                                CornerRadius="8"
                                Padding="20"
                                Spacing="16">
                        <TextBlock Text="基本信息" 
                                   Style="{StaticResource BodyStrongTextBlockStyle}"/>
                        
                        <StackPanel Spacing="12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="种子" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock Grid.Column="1" Text="{x:Bind ViewModel.Seed, Mode=OneWay}" TextWrapping="Wrap"/>
                            </Grid>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="创建时间" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock Grid.Column="1" Text="{x:Bind ViewModel.CreationTime, Mode=OneWay}"/>
                            </Grid>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="最后游玩" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock Grid.Column="1" Text="{x:Bind ViewModel.LastPlayedTime, Mode=OneWay}"/>
                            </Grid>
                        </StackPanel>
                    </StackPanel>

                    <!-- 统计信息卡片（预留） -->
                    <StackPanel Grid.Column="1" 
                                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                BorderThickness="1"
                                CornerRadius="8"
                                Padding="20"
                                Spacing="16">
                        <TextBlock Text="游玩统计" 
                                   Style="{StaticResource BodyStrongTextBlockStyle}"/>
                        
                        <StackPanel Spacing="12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="游玩时长" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                                <TextBlock Grid.Column="1" Text="{x:Bind ViewModel.PlayTime, Mode=OneWay}"/>
                            </Grid>

                            <InfoBar IsOpen="True" 
                                     Severity="Informational" 
                                     IsClosable="False"
                                     Message="更多统计功能即将推出"/>
                        </StackPanel>
                    </StackPanel>
                </Grid>

            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>
